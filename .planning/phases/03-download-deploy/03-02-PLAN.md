---
phase: 03-download-deploy
plan: 02
type: execute
wave: 2
depends_on: ["03-01"]
files_modified:
  - package.json
  - public/.nojekyll
  - README.md
autonomous: false

must_haves:
  truths:
    - "npm run deploy builds the app and pushes to gh-pages branch"
    - "GitHub Pages serves the app with crossOriginIsolated === true"
    - ".nojekyll file prevents GitHub Pages from ignoring _prefixed asset paths"
    - "README.md describes the project, features, tech stack, and usage"
  artifacts:
    - path: "package.json"
      provides: "predeploy + deploy scripts using gh-pages"
      contains: "gh-pages -d dist"
    - path: "public/.nojekyll"
      provides: "Jekyll bypass for GitHub Pages"
    - path: "README.md"
      provides: "Project documentation with features, tech stack, usage"
  key_links:
    - from: "package.json predeploy"
      to: "npm run build"
      via: "predeploy hook runs build before deploy"
      pattern: "predeploy.*npm run build"
    - from: "package.json deploy"
      to: "gh-pages -d dist --dotfiles"
      via: "deploy script pushes dist to gh-pages branch"
      pattern: "gh-pages.*--dotfiles"
---

<objective>
Set up GitHub Pages deployment with gh-pages npm package, add .nojekyll, create README.md, and verify production deployment works with cross-origin isolation.

Purpose: The app is useless if it's not deployed. This plan takes the completed app and puts it live on GitHub Pages with verified cross-origin isolation for WASM multithreading.
Output: Deploy scripts in package.json, .nojekyll in public/, README.md, verified production deployment.
</objective>

<execution_context>
@/Users/wojciecholszak/.claude/get-shit-done/workflows/execute-plan.md
@/Users/wojciecholszak/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/03-download-deploy/03-RESEARCH.md
@.planning/phases/03-download-deploy/03-01-SUMMARY.md
@vite.config.ts
@package.json
@index.html
</context>

<tasks>

<task type="auto">
  <name>Task 1: Deploy infrastructure + README</name>
  <files>package.json, public/.nojekyll, README.md</files>
  <action>
1. Install gh-pages: `npm install --save-dev gh-pages`

2. Add deploy scripts to `package.json`:
   ```json
   "predeploy": "npm run build",
   "deploy": "gh-pages -d dist --dotfiles"
   ```

3. Create `public/.nojekyll` -- empty file (prevents GitHub Pages Jekyll processing that ignores `_` prefixed paths like `_assets/`)

4. Create `README.md` with:
   - **Title**: BatchClear.io
   - **One-line description**: Free, client-side batch background removal powered by AI
   - **Features section** (bulleted list):
     - Batch drag-and-drop upload (up to 100 images)
     - AI-powered background removal (RMBG-1.4 via Transformers.js)
     - 100% client-side -- images never leave your device
     - Transparent (PNG) or white background (JPG) output
     - Before/after comparison slider
     - Individual and batch ZIP download
     - Dark/light theme
     - Responsive design (desktop, tablet, mobile)
   - **Tech Stack section**: React 19, Vite 6, Tailwind CSS 4, TypeScript, Transformers.js (RMBG-1.4 ONNX), fflate, Web Workers
   - **How It Works section**: Brief explanation of the pipeline (drag-drop -> Web Worker inference -> Canvas compositor -> download)
   - **Development section**: `npm install`, `npm run dev`, `npm run build`, `npm run deploy`
   - **Privacy section**: All processing happens locally in your browser. No images are uploaded anywhere. No server, no tracking, no data collection.
   - **License section**: MIT

5. Run `npm run build` to verify everything compiles and the .nojekyll file is copied to dist.
  </action>
  <verify>
- `npm run build` succeeds
- `dist/.nojekyll` exists after build
- package.json contains "predeploy" and "deploy" scripts
- README.md exists with features, tech stack, usage sections
  </verify>
  <done>Deploy scripts added to package.json, .nojekyll created in public/, README.md created with project documentation. Build succeeds and .nojekyll is present in dist/.</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>
Complete BatchClear.io application with batch download (individual + ZIP), navigation warning, deploy infrastructure, and README. Ready for production deployment.
  </what-built>
  <how-to-verify>
1. Run `npm run dev` and open the app in browser
2. Drop 2-3 images and wait for processing to complete
3. Verify "Download All (ZIP)" button appears -- click it and confirm ZIP downloads with `_nobg` suffix filenames
4. Verify individual download button on each done card works
5. Try closing the tab before downloading -- should see browser "Leave site?" warning
6. After downloading, closing tab should NOT show warning
7. Review README.md content
8. When ready to deploy: run `npm run deploy` (requires GitHub repo push access)
9. After deploy: visit https://wojciecholszak.github.io/BatchClear.io/ and verify:
   - App loads correctly
   - Model downloads on first visit
   - Open browser console: `crossOriginIsolated` should be `true`
   - Process an image end-to-end and download
  </how-to-verify>
  <resume-signal>Type "approved" to complete Phase 3, or describe any issues</resume-signal>
</task>

</tasks>

<verification>
1. `npm run build` succeeds
2. `dist/.nojekyll` exists
3. package.json has predeploy and deploy scripts with gh-pages
4. README.md covers features, tech stack, usage, privacy
5. Human verifies: ZIP download works, individual download works, navigation warning works, production deploy works with crossOriginIsolated === true
</verification>

<success_criteria>
- Deploy script in package.json successfully builds and deploys to GitHub Pages
- .nojekyll prevents Jekyll from eating _prefixed assets
- README.md is professional and complete
- Human verifies end-to-end flow works in production
</success_criteria>

<output>
After completion, create `.planning/phases/03-download-deploy/03-02-SUMMARY.md`
</output>
